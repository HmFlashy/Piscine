if (self.CavalryLogger) { CavalryLogger.start_js(["0NMoF"]); }

__d('MessengerInfoPanelThreadNameSectionTempHack.react',['cx','fbt','immutable','ImmutableObject','Keys','MercuryGenericConstants','MercuryThreadTitle.react','MessengerButton.react','MessengerSpinner.react','MessengerTextWithEmojiInput.react','MessengerThreadPhotoUploader.react','React','ReactDOM','setImmediate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelThreadNameSection1=false,this.state={isEditingName:false,isUploadingPhoto:false},this.setEditing=function(){this.setState({isEditingName:true});}.bind(this),this.$MessengerInfoPanelThreadNameSection3=function(s,t){this.setState({isUploadingPhoto:false});this.props.onThreadPhotoChange(this.props.thread.thread_id,t);}.bind(this),this.$MessengerInfoPanelThreadNameSection4=function(s,t){this.setState({isUploadingPhoto:false});}.bind(this),this.$MessengerInfoPanelThreadNameSection5=function(){this.setState({isUploadingPhoto:true});}.bind(this),this.$MessengerInfoPanelThreadNameSection9=function(s){s.stopPropagation();var t=this.refs.threadNameInput.getValue();if(t!==this.props.thread.name)this.props.onThreadNameChange(t);this.setState({isEditingName:false},function(){c('setImmediate')(function(){c('ReactDOM').findDOMNode(this.refs.editThreadNameButton).focus();}.bind(this));}.bind(this));}.bind(this),this.$MessengerInfoPanelThreadNameSection6=function(s){s.stopPropagation();if(!this.props.actionsEnabled)return;if(!this.state.isEditingName)this.setState({isEditingName:true});}.bind(this),this.$MessengerInfoPanelThreadNameSection7=function(s){if(this.state.isEditingName)return;if(s.charCode===c('Keys').RETURN||s.charCode===c('Keys').SPACE){s.preventDefault();this.$MessengerInfoPanelThreadNameSection6(s);}}.bind(this),this.$MessengerInfoPanelThreadNameSection10=function(s){if(s.currentTarget.contains(s.relatedTarget)){s.stopPropagation();return;}if(this.$MessengerInfoPanelThreadNameSection1){s.preventDefault();s.stopPropagation();this.$MessengerInfoPanelThreadNameSection1=false;return;}this.setState({isEditingName:false});}.bind(this),this.$MessengerInfoPanelThreadNameSection11=function(s){this.$MessengerInfoPanelThreadNameSection1=true;}.bind(this),o;}m.prototype.componentWillReceiveProps=function(n){if(this.props.thread!==n.thread){var o={isEditingName:false,isUploadingPhoto:false};if(this.state.isEditingName)o.isEditingName=this.state.isEditingName;this.setState(o);}};m.prototype.componentDidUpdate=function(n,o){if(this.state.isEditingName&&!o.isEditingName)c('setImmediate')(function(){return this.refs.threadNameInput.focusInput();}.bind(this));};m.prototype.render=function(){var n=this.state,o=n.isEditingName,p=n.isUploadingPhoto;return c('React').createElement('div',{className:"_2jnq"},c('React').createElement('div',{className:"_2jnr"+(p?' '+"_2jns":'')},this.props.renderedImage,p?this.$MessengerInfoPanelThreadNameSection2():null,this.props.actionsEnabled?c('React').createElement(c('MessengerThreadPhotoUploader.react'),{onComplete:this.$MessengerInfoPanelThreadNameSection3,onFail:this.$MessengerInfoPanelThreadNameSection4,onStart:this.$MessengerInfoPanelThreadNameSection5}):null),c('React').createElement('div',{className:"_2jnt"+(!o?' '+"_1sw_":'')+(!this.props.actionsEnabled?' '+"disabled":''),onClick:this.$MessengerInfoPanelThreadNameSection6,onKeyPress:this.$MessengerInfoPanelThreadNameSection7,ref:'editThreadNameButton',role:o?null:'button',tabIndex:0},c('React').createElement('div',{className:"_2jnu"},o?this.$MessengerInfoPanelThreadNameSection8():c('React').createElement(c('MercuryThreadTitle.react'),{className:"_2jnv",showUnreadCount:false,thread:this.props.thread,useShortName:false,viewer:this.props.viewer}))));};m.prototype.$MessengerInfoPanelThreadNameSection2=function(){return c('React').createElement('div',{className:"_2jnw"},c('React').createElement(c('MessengerSpinner.react'),null));};m.prototype.$MessengerInfoPanelThreadNameSection8=function(){return (c('React').createElement('div',{className:"_2jnx",onBlur:this.$MessengerInfoPanelThreadNameSection10},c('React').createElement('div',{className:"_2jny"},c('React').createElement(c('MessengerTextWithEmojiInput.react'),{className:"_2jnz",maxLength:c('MercuryGenericConstants').MAX_THREAD_NAME_LENGTH,onReturn:this.$MessengerInfoPanelThreadNameSection9,placeholder:i._("Nommez cette conversation"),ref:'threadNameInput',initialValue:this.props.thread.name})),c('React').createElement('div',{className:"_2jn-"},c('React').createElement(c('MessengerButton.react'),{label:i._("Termin\u00e9"),onClick:this.$MessengerInfoPanelThreadNameSection9,onMouseDown:this.$MessengerInfoPanelThreadNameSection11,ref:'threadNameDoneButton',role:'button',type:'primary'}))));};m.propTypes={actionsEnabled:l.bool.isRequired,onThreadNameChange:l.func.isRequired,onThreadPhotoChange:l.func.isRequired,participants:l.instanceOf(c('immutable').Map).isRequired,renderedImage:l.element.isRequired,thread:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired};f.exports=m;}),null);