if (self.CavalryLogger) { CavalryLogger.start_js(["YV60C"]); }

__d('ChatSidebarPreloadStore',['ChatSidebarData','InitialChatFriendsList'],(function a(b,c,d,e,f,g){'use strict';var h={onLoaded:function i(j){if(c('ChatSidebarData').AsyncDataPreloader){c('ChatSidebarData').AsyncDataPreloader.onLoaded(function(k){var l=k.list,m=k.groups,n=k.shortProfiles,o=k.nearby;return (j({buddies:l,groups:m,shortProfiles:n,nearby:o,profiles:[]}));});}else if(c('ChatSidebarData').WebGraphQLPreloader){c('ChatSidebarData').WebGraphQLPreloader.onLoaded(function(k){var l=k.buddies,m=k.groups,n=k.profiles,o=k.nearby;return (j({buddies:l,groups:m,profiles:n,nearby:o,shortProfiles:{}}));});}else j({buddies:c('InitialChatFriendsList').list||[],groups:c('InitialChatFriendsList').groups||[],shortProfiles:c('InitialChatFriendsList').shortProfiles||{},nearby:c('InitialChatFriendsList').nearby||[],profiles:[]});}};f.exports=h;}),null);
__d('ChatSortUsers',['ShortProfiles','TokenizeUtil'],(function a(b,c,d,e,f,g){var h={};function i(k){if(h[k])return h[k];var l=(c('ShortProfiles').getNow(k)||{}).name;if(l)return h[k]=c('TokenizeUtil').flatten(l);return '~';}var j={sortAlphabetical:function k(l,m){var n=i(l),o=i(m);if(n!==o)return n<o?-1:1;return 0;}};f.exports=j;}),null);
__d('PresenceStatusActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({AVAILABILITY_CHANGED:null});}),null);
__d('ChatDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationDispatcher'));i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=new j({strict:false});}),null);
__d('PresenceStatusStore',['ChatDispatcher','FluxStore','PresenceStatus','PresenceStatusActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('ChatDispatcher'));}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c('PresenceStatusActionTypes').AVAILABILITY_CHANGED:this.__emitChange();break;default:break;}};j.prototype.get=function(k){return c('PresenceStatus').get(k);};j.prototype.getIsPlaying=function(k){return c('PresenceStatus').isPlayingCanvasGameUser(k);};f.exports=new j();}),null);
__d('MeasurePeopleTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MeasurePeopleLoggerConfig',this.$MeasurePeopleTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MeasurePeopleLoggerConfig',this.$MeasurePeopleTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MeasurePeopleTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MeasurePeopleTypedLogger1=babelHelpers['extends']({},this.$MeasurePeopleTypedLogger1,j);return this;};var i={};f.exports=h;}),null);
__d('MessengerChatOnOffToggle.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerChatOnOffToggle1=function(){this.props.onAvailabilityChange&&this.props.onAvailabilityChange(!this.props.isUserAvailable);}.bind(this),o;}m.prototype.render=function(){var n=this.props.isUserAvailable;return c('React').createElement(c('Link.react'),{onClick:this.$MessengerChatOnOffToggle1,title:n?i._("Passer hors ligne"):i._("Passer en ligne")},c('React').createElement('div',{className:"_3dwl"+(n?' '+"_337l":'')},c('React').createElement('div',{className:"_3dwf"+(n?' '+"_3dwk":'')})));};m.propTypes={isUserAvailable:l.bool.isRequired,onAvailabilityChange:l.func};f.exports=m;}),null);
__d('messengerViewerCardReact',['cx','bs_curry','ImageBlock.react','bs_js_boolean','bs_js_primitive','MessengerChatOnOffToggle.react','MessengerContactImage.react','React','reactRe','utilsRe'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reactRe').StatelessComponent[0],j=c('reactRe').StatelessComponent[1],k=c('reactRe').StatelessComponent[2],l=c('reactRe').StatelessComponent[3],m=c('reactRe').StatelessComponent[4],n=c('reactRe').StatelessComponent[5];function o(v){var w=v[0],x=w[2];if(x){var y=x[0];return c('React').createElement(c('ImageBlock.react'),{className:"_1u5d",spacing:"medium"},c('React').createElement(c('MessengerContactImage.react'),{className:"_1u5h",isMessengerUser:true,size:34,src:y.image_src}),c('React').createElement("div",{className:"_1u5i"},c('React').createElement("div",{className:"_364g"},y.name)),c('React').createElement(c('MessengerChatOnOffToggle.react'),{isUserAvailable:c('bs_js_boolean').to_js_boolean(w[0]),onAvailabilityChange:c('utilsRe').optionToJsNull(w[1])}));}else return c('React').createElement("div",null);}function p(v){return [+v.isUserAvailable,c('bs_js_primitive').js_from_nullable_def(v.onAvailabilityChange),c('bs_js_primitive').js_from_nullable_def(v.viewerData)];}var q=c('bs_curry')._8(n,"MessengerViewerCardReact",i,j,l,k,m,[p],o),r=q[1];function s(v,w,x){return c('bs_curry')._1(r,[v,w,x]);}var t=34,u=q[0];g.getInstanceVariables=i;g.componentDidMount=j;g.componentDidUpdate=k;g.componentWillReceiveProps=l;g.componentWillUnmount=m;g.createClass=n;g.imageSize=t;g.render=o;g.jsPropsToReasonProps=p;g.comp=u;g.wrapProps=r;g.createElement=s;}),null);
__d('MessengerActiveUsersList.react',['cx','fbt','ImmutableObject','MeasurePeopleTypedLogger','MercuryIDs','MercuryThreads','MessengerActions','messengerContactListRowContainerReact','messengerViewerCardReact','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryThreads').get(),m=c('messengerContactListRowContainerReact').comp,n=c('messengerViewerCardReact').comp,o=c('React').PropTypes;j=babelHelpers.inherits(p,c('React').PureComponent);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.$MessengerActiveUsersList1=function(v){l.getThreadMeta(c('MercuryIDs').getThreadIDFromUserID(v.fbid),function(w){c('MessengerActions').selectThread(w.thread_id);});},r;}p.prototype.componentDidMount=function(){new (c('MeasurePeopleTypedLogger'))().log();};p.prototype.render=function(){var q=void 0;if(this.props.isUserAvailable)q=c('React').createElement('div',null,c('React').createElement('div',{className:"_225b"},i._("Contacts actifs ({number_of_contacts})",[i.param('number_of_contacts',this.props.contacts.length)])),c('React').createElement('ul',null,this.props.contacts.map(function(r){return c('React').createElement(m,{contactAdapter:this.props.contactAdapter,extraActionsEnabled:false,isHighlighted:r.fbid&&r.fbid===this.props.activeThreadID,key:r.id,onSelect:this.$MessengerActiveUsersList1,rawContact:r,showPresence:true,viewer:this.props.viewer,thread:r.thread});}.bind(this))));return c('React').createElement('div',null,c('React').createElement(n,{isUserAvailable:this.props.isUserAvailable,onAvailabilityChange:this.props.onAvailabilityChange,viewerData:this.props.viewerData}),q);};p.propTypes={activeThreadID:o.string,contactAdapter:o.func.isRequired,contacts:o.array.isRequired,isUserAvailable:o.bool.isRequired,onAvailabilityChange:o.func,viewer:o.string.isRequired,viewerData:o.instanceOf(c('ImmutableObject'))};f.exports=p;}),null);
__d("messengerSignalsRe",["EventEmitter"],(function a(b,c,d,e,f,g){'use strict';var h=new (c("EventEmitter"))(),i="resize",j={resize:function k(){return h.emit(i);},onResize:function k(l){return h.addListener(i,l);}};g.emitter=h;g.resizeEvent=i;g.signals=j;}),null);
__d('MessengerFlexArea.react',['cx','Event','messengerSignalsRe','React','ReactDOM','ResponsiveBlock.react','Style','SubscriptionsHandler','Vector','getScrollPosition','joinClasses','throttle'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('messengerSignalsRe').signals,j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerFlexArea',propTypes:{beforeResize:j.func,onResize:j.func},_subscriptions:null,_onResizeTimeout:null,getInitialState:function l(){return {height:0};},componentDidMount:function l(){var m=new (c('SubscriptionsHandler'))();m.addSubscriptions(c('Event').listen(window,'resize',c('throttle')(this.recalculateHeight,51)),i.onResize(function(){this.recalculateHeight();}.bind(this)));this._subscriptions=m;this.recalculateHeight();},componentWillUnmount:function l(){this._subscriptions&&this._subscriptions.release();clearTimeout(this._onResizeTimeout);},render:function l(){return (c('React').createElement(c('ResponsiveBlock.react'),{className:c('joinClasses')(this.props.className,"_9hq"),onResize:this._handleResponsiveBlockResize,style:{height:this.state.height+'px'}},this.props.children));},recalculateHeight:function l(){if(!this.isMounted())return;var m=c('ReactDOM').findDOMNode(this),n=m.parentNode,o=this.state.height,p=c('Vector').getViewportDimensions().y,q=false;if(n&&c('Style').get(n,'display')==='none'){c('Style').set(n,'display','initial');q=true;}p-=c('Vector').getElementPosition(n||m).y;var r=c('getScrollPosition')(window);p+=r.y;if(n){Array.from(n.childNodes).forEach(function(s){if(s.nodeType===Node.COMMENT_NODE||c('Style').get(s,'position')==='absolute')return;p-=c('Vector').getElementDimensions(s).y;});p+=c('Vector').getElementDimensions(m).y;}if(q)c('Style').set(n,'display','');if(isNaN(p)||p<0)p=0;if(p!==o){this.props.beforeResize&&this.props.beforeResize();this.setState({height:p},this.props.onResize);}},_handleResponsiveBlockResize:c('throttle')(function(l,m){if(!this.isMounted())return;if(m===this.state.height){this.props.beforeResize&&this.props.beforeResize();clearTimeout(this._onResizeTimeout);if(this.props.onResize)this._onResizeTimeout=setTimeout(this.props.onResize,0);}},51)});f.exports=k;}),null);
__d('MessengerFlexScrollableArea.react',['MessengerFlexArea.react','MessengerScrollableArea.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={shouldTrackBottom:this.props.shouldStickToBottom},this.$MessengerFlexScrollableArea3=function(){this.props.onScroll&&this.props.onScroll();if(!this.props.shouldStickToBottom)return;this.$MessengerFlexScrollableArea4();}.bind(this),this.getArea=function(){return this.refs.scrollable&&this.refs.scrollable.getArea();}.bind(this),this.$MessengerFlexScrollableArea2=function(){this.trackBottomIfRequired();}.bind(this),this.handleResize=function(){this.refs.flexArea&&this.refs.flexArea.recalculateHeight();}.bind(this),this.trackBottomIfRequired=function(){if(this.state.shouldTrackBottom)this.scrollToBottom();}.bind(this),this.scrollToBottom=function(){this.refs.scrollable&&this.refs.scrollable.scrollToBottom();}.bind(this),this.scrollToTop=function(q){this.refs.scrollable&&this.refs.scrollable.scrollToTop(q);}.bind(this),this.isScrolledToBottom=function(){var q=this.refs.scrollable;return q?q.isScrolledToBottom():true;}.bind(this),this.isScrolledToBottomWithHeight=function(q){return this.refs.scrollable.isScrolledToBottomWithHeight(q);}.bind(this),this.isScrolledToTop=function(){return this.refs.scrollable&&this.refs.scrollable.isScrolledToTop();}.bind(this),this.getScrollTop=function(){return this.refs.scrollable&&this.refs.scrollable.getScrollTop()||0;}.bind(this),m;}k.prototype.componentDidMount=function(){this.props.onMount&&this.props.onMount();};k.prototype.render=function(){return c('React').createElement(c('MessengerFlexArea.react'),{className:this.props.className,onResize:this.$MessengerFlexScrollableArea2,ref:'flexArea'},this.props.flexChildren,c('React').createElement(c('MessengerScrollableArea.react'),{height:'100%',needsFastScrollHandler:this.state.shouldTrackBottom,onScroll:this.$MessengerFlexScrollableArea3,ref:'scrollable',tabIndex:this.props.tabIndex},this.props.children),this.props.footerChildren);};k.prototype.$MessengerFlexScrollableArea4=function(){if(this.isScrolledToBottom()){this.setState({shouldTrackBottom:true});this.$MessengerFlexScrollableArea5();}else{this.setState({shouldTrackBottom:false});this.$MessengerFlexScrollableArea6();}};k.prototype.$MessengerFlexScrollableArea5=function(){if(!this.props.useScrollProtection)return;this.$MessengerFlexScrollableArea6();this.$MessengerFlexScrollableArea1=setInterval(function(){this.trackBottomIfRequired();}.bind(this),500);};k.prototype.$MessengerFlexScrollableArea6=function(){if(this.$MessengerFlexScrollableArea1)clearInterval(this.$MessengerFlexScrollableArea1);};k.prototype.scrollToPosition=function(l,m,n){this.refs.scrollable&&this.refs.scrollable.scrollToPosition(l,m,n);};k.propTypes={flexChildren:j.node,footerChildren:j.node,onMount:j.func,onScroll:j.func,shouldStickToBottom:j.bool,tabIndex:j.number,useScrollProtection:j.bool};f.exports=k;}),null);
__d('PresenceOrderedList',['ChatSidebarPreloadStore','ChatSortUsers','PresencePrivacy','PresenceStatus'],(function a(b,c,d,e,f,g){function h(k){return k.map(function(l){var m=l.slice(0,-2),n=Number(l.slice(-1));return [m,n];});}function i(k,l){var m=[];k.forEach(function(n){var o=n[0],p=n[1];if(m.length>=l)return;if(c('PresencePrivacy').getFriendVisibility(o)==c('PresencePrivacy').BLACKLISTED)return;if(p==c('PresenceStatus').get(o))m.push(o);});return m;}function j(){'use strict';this.$PresenceOrderedList1=null;}j.prototype.getSorted=function(k,l){'use strict';if(this.$PresenceOrderedList1){l(i(this.$PresenceOrderedList1,k));return;}c('ChatSidebarPreloadStore').onLoaded(function(m){var n=m.buddies;this.$PresenceOrderedList1=h(n);l(i(this.$PresenceOrderedList1,k));}.bind(this));};j.prototype.getAvailableSorted=function(k){'use strict';var l=c('PresenceStatus').getOnlineIDs();if(k)l=l.filter(function(m){return k&&k.indexOf(m)===-1;});return l.sort(c('ChatSortUsers').sortAlphabetical);};j.prototype.getAllSorted=function(k){'use strict';var l=[],m=this.$PresenceOrderedList1||[];c('PresenceStatus').getAllIDs().concat(m.map(function(n){return n[0];})).forEach(function(n){return l.indexOf(n)===-1&&l.push(n);});if(k)l=l.filter(function(n){return k&&k.indexOf(n)===-1;});return l.sort(c('ChatSortUsers').sortAlphabetical);};f.exports=new j();}),null);
__d('MessengerActiveUsersListContainer.react',['AvailableListConstants','MercuryIDs','MercuryParticipants','MessengerActiveUsersList.react','MessengerContactAdapters','MessengerFlexScrollableArea.react','PresenceOrderedList','PresencePrivacy','PresenceStatusStore','React','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=200;h=babelHelpers.inherits(l,c('React').PureComponent);i=h&&h.prototype;function l(n){i.constructor.call(this,n);m.call(this);var o=c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(n.viewer));this.state={contacts:[],isUserAvailable:c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE,viewerData:o};}l.prototype.componentWillMount=function(){this.$MessengerActiveUsersListContainer1=c('MercuryParticipants').addListener('change',this.$MessengerActiveUsersListContainer3);this.$MessengerActiveUsersListContainer2=c('PresenceStatusStore').addListener(function(){this.$MessengerActiveUsersListContainer3;}.bind(this));c('PresencePrivacy').subscribe('privacy-user-presence-changed',this.$MessengerActiveUsersListContainer3);this.$MessengerActiveUsersListContainer3();};l.prototype.componentWillUnmount=function(){this.$MessengerActiveUsersListContainer1&&this.$MessengerActiveUsersListContainer1.remove();this.$MessengerActiveUsersListContainer2&&this.$MessengerActiveUsersListContainer2.remove();};l.prototype.render=function(){return (c('React').createElement(c('MessengerFlexScrollableArea.react'),{onScroll:c('emptyFunction'),ref:'scrollable'},c('React').createElement(c('MessengerActiveUsersList.react'),{activeThreadID:c('MercuryIDs').getUserIDFromThreadID(this.props.activeThreadID)||undefined,isUserAvailable:this.state.isUserAvailable,contactAdapter:c('MessengerContactAdapters').fromMercuryParticipant,contacts:this.state.isUserAvailable?this.state.contacts:[],onAvailabilityChange:this.$MessengerActiveUsersListContainer4,viewerData:this.state.viewerData,viewer:this.props.viewer})));};l.prototype.$MessengerActiveUsersListContainer4=function(n){c('PresencePrivacy').setVisibility(n?c('PresencePrivacy').ONLINE:c('PresencePrivacy').OFFLINE);};l.propTypes={activeThreadID:j.string,viewer:j.string.isRequired};var m=function n(){this.$MessengerActiveUsersListContainer1=null;this.$MessengerActiveUsersListContainer2=null;this.$MessengerActiveUsersListContainer3=function(){c('PresenceOrderedList').getSorted(k,function(o){var p=c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer)),q=c('PresenceOrderedList').getAvailableSorted(o),r=o.filter(function(t){return c('PresencePrivacy').allows(t);}),s=r.concat(q).filter(function(t){return c('PresenceStatusStore').get(t)===c('AvailableListConstants').ACTIVE;}).map(function(t){return c('MercuryIDs').getParticipantIDFromUserID(t);}).map(function(t){return c('MercuryParticipants').getOrFetch(t);}).filter(function(t){return !!t;});this.setState({contacts:s,isUserAvailable:c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE,viewerData:p});}.bind(this));}.bind(this);};f.exports=l;}),null);
__d('MessengerPeopleList.react',['MessengerActiveUsersListContainer.react','React'],(function a(b,c,d,e,f,g){'use strict';var h=function i(j){return (c('React').createElement(c('MessengerActiveUsersListContainer.react'),{activeThreadID:j.activeThreadID||undefined,viewer:j.viewer}));};f.exports=h;}),null);